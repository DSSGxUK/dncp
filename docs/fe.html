<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Feature Engineering | DNCP Project Documentation</title>
  <meta name="description" content="This is the documentation for the DNCP Project of the Summer 2021 DSSGx Fellowship at the University of Warwick and LMU." />
  <meta name="generator" content="bookdown 0.23 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Feature Engineering | DNCP Project Documentation" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is the documentation for the DNCP Project of the Summer 2021 DSSGx Fellowship at the University of Warwick and LMU." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Feature Engineering | DNCP Project Documentation" />
  
  <meta name="twitter:description" content="This is the documentation for the DNCP Project of the Summer 2021 DSSGx Fellowship at the University of Warwick and LMU." />
  



<meta name="date" content="2021-08-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="buyer.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">DNCP Documentation</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="fe.html"><a href="fe.html"><i class="fa fa-check"></i><b>2</b> Feature Engineering</a>
<ul>
<li class="chapter" data-level="2.1" data-path="fe.html"><a href="fe.html#fe-script"><i class="fa fa-check"></i><b>2.1</b> The Script</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="fe.html"><a href="fe.html#fe-script-required-files"><i class="fa fa-check"></i><b>2.1.1</b> Required Files</a></li>
<li class="chapter" data-level="2.1.2" data-path="fe.html"><a href="fe.html#fe-script-required-r-packages"><i class="fa fa-check"></i><b>2.1.2</b> Required R Packages</a></li>
<li class="chapter" data-level="2.1.3" data-path="fe.html"><a href="fe.html#fe-script-tasks-performed"><i class="fa fa-check"></i><b>2.1.3</b> Tasks Performed</a></li>
<li class="chapter" data-level="2.1.4" data-path="fe.html"><a href="fe.html#fe-script-outputs"><i class="fa fa-check"></i><b>2.1.4</b> Outputs</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="fe.html"><a href="fe.html#fe-conf"><i class="fa fa-check"></i><b>2.2</b> The Configuration File</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="fe.html"><a href="fe.html#fe-conf-data-load"><i class="fa fa-check"></i><b>2.2.1</b> Loading in Data</a></li>
<li class="chapter" data-level="2.2.2" data-path="fe.html"><a href="fe.html#features"><i class="fa fa-check"></i><b>2.2.2</b> Features</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="buyer.html"><a href="buyer.html"><i class="fa fa-check"></i><b>3</b> Buyer Groupings</a>
<ul>
<li class="chapter" data-level="3.1" data-path="buyer.html"><a href="buyer.html#buyer-information-fields"><i class="fa fa-check"></i><b>3.1</b> Buyer Information Fields</a></li>
<li class="chapter" data-level="3.2" data-path="buyer.html"><a href="buyer.html#buyer-add-info-to-tenders"><i class="fa fa-check"></i><b>3.2</b> Adding Buyer Information to Tenders</a></li>
<li class="chapter" data-level="3.3" data-path="buyer.html"><a href="buyer.html#buyer-level"><i class="fa fa-check"></i><b>3.3</b> Buyer Levels</a></li>
<li class="chapter" data-level="3.4" data-path="buyer.html"><a href="buyer.html#buyer-name-description"><i class="fa fa-check"></i><b>3.4</b> Buyer Names and Descriptions</a></li>
<li class="chapter" data-level="3.5" data-path="buyer.html"><a href="buyer.html#buyer-frequent-words"><i class="fa fa-check"></i><b>3.5</b> Most Frequent Words</a></li>
<li class="chapter" data-level="3.6" data-path="buyer.html"><a href="buyer.html#buyer-groupings"><i class="fa fa-check"></i><b>3.6</b> Final Buyer Groupings</a></li>
<li class="chapter" data-level="3.7" data-path="buyer.html"><a href="buyer.html#buyer-variable-importance"><i class="fa fa-check"></i><b>3.7</b> Variable Importance Exploration</a></li>
<li class="chapter" data-level="3.8" data-path="buyer.html"><a href="buyer.html#buyer-conclusions"><i class="fa fa-check"></i><b>3.8</b> Implementation Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="context.html"><a href="context.html"><i class="fa fa-check"></i><b>4</b> Context Groupings</a>
<ul>
<li class="chapter" data-level="4.1" data-path="context.html"><a href="context.html#context-information-fields"><i class="fa fa-check"></i><b>4.1</b> Context Information Fields</a></li>
<li class="chapter" data-level="4.2" data-path="context.html"><a href="context.html#context-frequent-words"><i class="fa fa-check"></i><b>4.2</b> Most Frequent Words</a></li>
<li class="chapter" data-level="4.3" data-path="context.html"><a href="context.html#context-word-assoc"><i class="fa fa-check"></i><b>4.3</b> Most Frequent Word Associations</a></li>
<li class="chapter" data-level="4.4" data-path="context.html"><a href="context.html#context-word-regression"><i class="fa fa-check"></i><b>4.4</b> Most Influential Words</a></li>
<li class="chapter" data-level="4.5" data-path="context.html"><a href="context.html#context-groupings"><i class="fa fa-check"></i><b>4.5</b> Final Context Groupings</a></li>
<li class="chapter" data-level="4.6" data-path="context.html"><a href="context.html#context-conclusions"><i class="fa fa-check"></i><b>4.6</b> Implementation Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="outlier.html"><a href="outlier.html"><i class="fa fa-check"></i><b>5</b> Outlier Removal</a>
<ul>
<li class="chapter" data-level="5.1" data-path="outlier.html"><a href="outlier.html#outlier-anomaly-scores"><i class="fa fa-check"></i><b>5.1</b> Anomaly Scores</a></li>
<li class="chapter" data-level="5.2" data-path="outlier.html"><a href="outlier.html#outlier-statistics"><i class="fa fa-check"></i><b>5.2</b> Outlier Statistics</a></li>
<li class="chapter" data-level="5.3" data-path="outlier.html"><a href="outlier.html#outlier-descriptions"><i class="fa fa-check"></i><b>5.3</b> Outlier Descriptions</a></li>
<li class="chapter" data-level="5.4" data-path="outlier.html"><a href="outlier.html#outlier-conclusions"><i class="fa fa-check"></i><b>5.4</b> Implementation Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="eda.html"><a href="eda.html"><i class="fa fa-check"></i><b>6</b> Exploratory Data Analysis</a>
<ul>
<li class="chapter" data-level="6.1" data-path="eda.html"><a href="eda.html#eda-pdf"><i class="fa fa-check"></i><b>6.1</b> The PDF File</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="eda.html"><a href="eda.html#eda-pdf-types"><i class="fa fa-check"></i><b>6.1.1</b> Types of EDA Performed</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="eda.html"><a href="eda.html#eda-data-dictionary"><i class="fa fa-check"></i><b>6.2</b> The Data Dictionary</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="train.html"><a href="train.html"><i class="fa fa-check"></i><b>7</b> Training</a>
<ul>
<li class="chapter" data-level="7.1" data-path="train.html"><a href="train.html#train-script"><i class="fa fa-check"></i><b>7.1</b> The Script</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="train.html"><a href="train.html#train-script-files"><i class="fa fa-check"></i><b>7.1.1</b> Required Files</a></li>
<li class="chapter" data-level="7.1.2" data-path="train.html"><a href="train.html#train-script-required-r-packages"><i class="fa fa-check"></i><b>7.1.2</b> Required R Packages</a></li>
<li class="chapter" data-level="7.1.3" data-path="train.html"><a href="train.html#train-script-tasks"><i class="fa fa-check"></i><b>7.1.3</b> Tasks Performed by the Script</a></li>
<li class="chapter" data-level="7.1.4" data-path="train.html"><a href="train.html#train-conf-outputs"><i class="fa fa-check"></i><b>7.1.4</b> Outputs</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="train.html"><a href="train.html#train-conf"><i class="fa fa-check"></i><b>7.2</b> The Configuration File</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="train.html"><a href="train.html#train-conf-data"><i class="fa fa-check"></i><b>7.2.1</b> Data</a></li>
<li class="chapter" data-level="7.2.2" data-path="train.html"><a href="train.html#train-conf-model"><i class="fa fa-check"></i><b>7.2.2</b> Model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="predict.html"><a href="predict.html"><i class="fa fa-check"></i><b>8</b> Application &amp; Prediction</a>
<ul>
<li class="chapter" data-level="8.1" data-path="predict.html"><a href="predict.html#predict-script"><i class="fa fa-check"></i><b>8.1</b> The Script</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="predict.html"><a href="predict.html#predict-script-required-files"><i class="fa fa-check"></i><b>8.1.1</b> Required Files</a></li>
<li class="chapter" data-level="8.1.2" data-path="predict.html"><a href="predict.html#predict-script-required-r-packages"><i class="fa fa-check"></i><b>8.1.2</b> Required R Packages</a></li>
<li class="chapter" data-level="8.1.3" data-path="predict.html"><a href="predict.html#predict-script-tasks"><i class="fa fa-check"></i><b>8.1.3</b> Tasks Performed in the Script</a></li>
<li class="chapter" data-level="8.1.4" data-path="predict.html"><a href="predict.html#predict-script-fe"><i class="fa fa-check"></i><b>8.1.4</b> Feature Engineering on New Data</a></li>
<li class="chapter" data-level="8.1.5" data-path="predict.html"><a href="predict.html#predict-script-make-predictions"><i class="fa fa-check"></i><b>8.1.5</b> Making Predictions on New Data</a></li>
<li class="chapter" data-level="8.1.6" data-path="predict.html"><a href="predict.html#predict-script-outputs"><i class="fa fa-check"></i><b>8.1.6</b> Outputs</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="predict.html"><a href="predict.html#predict-conf"><i class="fa fa-check"></i><b>8.2</b> The Configuration File</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="predict.html"><a href="predict.html#predict-conf-data"><i class="fa fa-check"></i><b>8.2.1</b> Data</a></li>
<li class="chapter" data-level="8.2.2" data-path="predict.html"><a href="predict.html#predict-conf-features"><i class="fa fa-check"></i><b>8.2.2</b> Features</a></li>
<li class="chapter" data-level="8.2.3" data-path="predict.html"><a href="predict.html#predict-conf-model"><i class="fa fa-check"></i><b>8.2.3</b> Model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="eval.html"><a href="eval.html"><i class="fa fa-check"></i><b>9</b> Model Evaluation</a>
<ul>
<li class="chapter" data-level="9.1" data-path="eval.html"><a href="eval.html#eval-metrics"><i class="fa fa-check"></i><b>9.1</b> Evaluation Metrics</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="eval.html"><a href="eval.html#eval-rmse"><i class="fa fa-check"></i><b>9.1.1</b> RMSE</a></li>
<li class="chapter" data-level="9.1.2" data-path="eval.html"><a href="eval.html#eval-range"><i class="fa fa-check"></i><b>9.1.2</b> Range</a></li>
<li class="chapter" data-level="9.1.3" data-path="eval.html"><a href="eval.html#eval-rsq"><i class="fa fa-check"></i><b>9.1.3</b> <span class="math inline">\(R^2\)</span></a></li>
<li class="chapter" data-level="9.1.4" data-path="eval.html"><a href="eval.html#eval-mae"><i class="fa fa-check"></i><b>9.1.4</b> MAE</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="eval.html"><a href="eval.html#eval-important-features"><i class="fa fa-check"></i><b>9.2</b> Most Important Features</a></li>
<li class="chapter" data-level="9.3" data-path="eval.html"><a href="eval.html#eval-models"><i class="fa fa-check"></i><b>9.3</b> Models Used</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="eval.html"><a href="eval.html#eval-ols"><i class="fa fa-check"></i><b>9.3.1</b> Linear Regression</a></li>
<li class="chapter" data-level="9.3.2" data-path="eval.html"><a href="eval.html#eval-rf"><i class="fa fa-check"></i><b>9.3.2</b> Random Forest</a></li>
<li class="chapter" data-level="9.3.3" data-path="eval.html"><a href="eval.html#eval-xgb"><i class="fa fa-check"></i><b>9.3.3</b> XGBoost</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="eval.html"><a href="eval.html#eval-top-10"><i class="fa fa-check"></i><b>9.4</b> Top 10 Most Important Features</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="eval.html"><a href="eval.html#eval-top-10-goods"><i class="fa fa-check"></i><b>9.4.1</b> Goods-Only Dataset</a></li>
<li class="chapter" data-level="9.4.2" data-path="eval.html"><a href="eval.html#eval-top-10-services"><i class="fa fa-check"></i><b>9.4.2</b> Services-Only Dataset</a></li>
<li class="chapter" data-level="9.4.3" data-path="eval.html"><a href="eval.html#eval-top-10-combined"><i class="fa fa-check"></i><b>9.4.3</b> Combined Dataset</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="conclusions.html"><a href="conclusions.html"><i class="fa fa-check"></i><b>10</b> Conclusions</a>
<ul>
<li class="chapter" data-level="10.1" data-path="conclusions.html"><a href="conclusions.html#outcomes"><i class="fa fa-check"></i><b>10.1</b> Outcomes</a></li>
<li class="chapter" data-level="10.2" data-path="conclusions.html"><a href="conclusions.html#limitations"><i class="fa fa-check"></i><b>10.2</b> Limitations</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DNCP Project Documentation</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="fe" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Feature Engineering</h1>
<div id="fe-script" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> The Script</h2>
<p>The feature engineering script, <code>fe.R</code>, performs a multitude of tasks to clean and prepare the input data for the tender and procurement process.</p>
<div id="fe-script-required-files" class="section level3" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Required Files</h3>
<p>The <code>fe.R</code> script is not a self contained script and requires the input data and other scripts containing helper functions. The following is a list of necessary files and the structure they should follow. Make sure the folders are already created in the directory before running the scripts:</p>
<ul>
<li><code>src/</code>
<ul>
<li><code>scripts/</code>
<ul>
<li><code>fe.R</code> (encompassing script to run)</li>
</ul></li>
<li><code>functions/</code>
<ul>
<li><code>fe_helpers.R</code> (set of helper functions to perform tasks in <code>fe.R</code>)</li>
<li><code>fe_group_buyer.R</code> (script to create buyer groups)</li>
<li><code>fe_group_context.R</code> (script to create context groups)</li>
<li><code>fe_outlier_detection.R</code> (script to detect outliers)</li>
</ul></li>
</ul></li>
<li><code>data/</code>
<ul>
<li><code>raw/</code>
<ul>
<li><code>ipc.csv</code> (dataset with consumer price index data)</li>
<li><code>cotizacion.csv</code> (dataset with USD to PYG exchange rates)</li>
<li>Any other input data to be included in the training dataset</li>
</ul></li>
</ul></li>
<li><code>conf/</code>
<ul>
<li><code>fe_conf.yaml</code> (configuration file for <code>fe.R</code>)</li>
<li><code>eda_conf.yaml</code> (configuration file for automated EDA)</li>
<li><code>meta/</code>
<ul>
<li><code>training_set_data_dict_VERSION.xlsx</code> (data dictionary)</li>
</ul></li>
</ul></li>
<li><code>reports/</code>
<ul>
<li><code>training_set_eda.Rmd</code> (file to perform automated EDA on the training dataset)</li>
</ul></li>
</ul>
</div>
<div id="fe-script-required-r-packages" class="section level3" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> Required R Packages</h3>
<p>The following is a list of R packages necessary for running <code>fe.R</code> and its associated scripts and reports:</p>
<ul>
<li><code>caret</code></li>
<li><code>cowplot</code></li>
<li><code>janitor</code></li>
<li><code>lubridate</code></li>
<li><code>moments</code></li>
<li><code>tidytext</code></li>
<li><code>tidyverse</code></li>
<li><code>tm</code></li>
<li><code>wesanderson</code></li>
<li><code>yaml</code></li>
</ul>
</div>
<div id="fe-script-tasks-performed" class="section level3" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> Tasks Performed</h3>
<div id="fe-script-join-data" class="section level4" number="2.1.3.1">
<h4><span class="header-section-number">2.1.3.1</span> Joining the Data</h4>
<p>To perform an analysis on the database, a single dataset is necessary. Thus, after loading in all desired input data, they are merged together. How to specify desired input data is explained in the <a href="fe.html#fe-conf-data-load">Configuration Data Loading</a> section. To merge them together, a few steps are necessary. The two most important are to rename the individual id columns to enable merging. For example, <code>producto_n1</code> has an <strong>id</strong> column and <code>producto_n2</code> has an <strong>producto_n1_id</strong> column which are clearly related. The script will rename <strong>id</strong> to be <strong>producto_n1_id</strong> and thus easily allow for merging. The second important step is to rename all variables to include information about the original input data. As multiple datasets have the same variable names, it is necessary to make this distinction for clarity and data provenance. For example, <strong>monto_total</strong> is present in both <code>pac</code> and <code>llamado</code>. In the joined dataset, there are two columns, <strong>monto_total_pac</strong> and <strong>monto_total_llamado.</strong> Once this task is complete, there is a single unified dataset with all variables from the desired input data</p>
</div>
<div id="fe-script-goods-services" class="section level4" number="2.1.3.2">
<h4><span class="header-section-number">2.1.3.2</span> Creating Goods/Services Indicator</h4>
<p>The level 5 (<code>producto_n5</code>) product descriptions contains the variable <strong>codigo</strong>, representing a unique code for each product in the product catalog. The catalog contains both goods and services, with goods being the products with codes below 700000, and services above 700000. We utilized this variable to create a new variable, <strong>service</strong>, that indicates whether a given product is a good or a service, with the value <em>TRUE</em> if a product is a service, or <em>FALSE</em> if it is a good. This variable can be used as a predictor, or as a way to create a model that focuses on either goods or services and not both.</p>
</div>
<div id="fe-script-filter" class="section level4" number="2.1.3.3">
<h4><span class="header-section-number">2.1.3.3</span> Filtering</h4>
<p>The merged dataset can then be filtered down to a desired level. Unlimited conditions can be added to the configuration file using the instructions in <a href="fe.html#fe-conf-filter">Configuration Filtering</a> section. Some examples of desirable filter conditions are removing open contracts, choosing data after 2015, or removing services.</p>
</div>
<div id="fe-script-currency-inflation" class="section level4" number="2.1.3.4">
<h4><span class="header-section-number">2.1.3.4</span> Adjusting for Currency and Inflation</h4>
<p>The prices for the contracts are not uniform throughout the data. Inflation and deflation of currency impacts direct comparability of prices for different years. Additionally, some prices are presented in US dollars instead of PYG. To enable consistency in prices, we performed two tasks. First, all USD prices are converted into PYG for their given year using the daily conversion rates in <code>cotizacion.csv</code>. Then, the PYG prices are adjusted to their true value in a desired year and month using consumer price index (CPI) data from the Central Bank of Paraguay. In brief, the CPI accounts for inflation by measuring average changes in prices over time that consumers pay for goods and services. The base year will be given a value of 100, and every other year is assigned a value below or above 100 based on these changes in prices. The script allows for a dynamic selection of a base year and base month for inflation adjustment. This means prices can be adjusted to be in March 2021 PYG or June 2015 PYG, etc. Performing this selection is described in the <a href="fe.html#fe-conf-currency-inflation">Configuration Inflation</a> section.</p>
</div>
<div id="fe-script-grouping" class="section level4" number="2.1.3.5">
<h4><span class="header-section-number">2.1.3.5</span> Creating Grouping Variables</h4>
<p>To enhance the training dataset, two new categories of indicator variables were created using text analysis: buyer groups and context groups.</p>
<p>Buyer group variables are created through text analysis on the buyer names for each tender, as recorded in the <code>descripcion</code> field of <code>unidad_contratacion.csv</code>. Each buyer group variable is associated to a specific string pattern:</p>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">String Pattern</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">police</td>
<td align="left">policia</td>
</tr>
<tr class="even">
<td align="left">hospital</td>
<td align="left">hospital|cancer</td>
</tr>
<tr class="odd">
<td align="left">science</td>
<td align="left">ciencia</td>
</tr>
<tr class="even">
<td align="left">health</td>
<td align="left">salud</td>
</tr>
<tr class="odd">
<td align="left">law</td>
<td align="left">justicia|judicial</td>
</tr>
<tr class="even">
<td align="left">ministry</td>
<td align="left">ministerio</td>
</tr>
<tr class="odd">
<td align="left">education</td>
<td align="left">universidad|facultad|educacion</td>
</tr>
<tr class="even">
<td align="left">army</td>
<td align="left">defensa|comando|armada|ejercito</td>
</tr>
<tr class="odd">
<td align="left">bank</td>
<td align="left">banco</td>
</tr>
<tr class="even">
<td align="left">tech</td>
<td align="left">tecnologia|aeronautica</td>
</tr>
<tr class="odd">
<td align="left">electricity</td>
<td align="left">ande|electricidad</td>
</tr>
</tbody>
</table>
<p>The <code>education</code> buyer variable will then be true for all items in a specific tender if the name of that tender’s buyer includes any of the words <em>“universidad”</em>, <em>“facultad”</em>, or <em>“educacion”</em>.</p>
<p>Similarly, context group variables are created through text analysis on the tender descriptions, as recorded in the <code>detalle</code> field of <code>llamado.csv</code>. Each context group variable is once agai associated to a specific string pattern:</p>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">String Pattern</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">food</td>
<td align="left">alimento|alimenticio</td>
</tr>
<tr class="even">
<td align="left">vehicle</td>
<td align="left">vehiculo</td>
</tr>
<tr class="odd">
<td align="left">construction</td>
<td align="left">construccion|edificio|obra</td>
</tr>
<tr class="even">
<td align="left">hardware</td>
<td align="left">ferreteria|herramienta</td>
</tr>
<tr class="odd">
<td align="left">preventive_corrective</td>
<td align="left">preventivo|correctivo</td>
</tr>
<tr class="even">
<td align="left">real_estate</td>
<td align="left">inmuebl</td>
</tr>
<tr class="odd">
<td align="left">office</td>
<td align="left">oficina|tinta|toner|papel|fotocopiadora|impreso|impresion</td>
</tr>
<tr class="even">
<td align="left">specialized_supplies</td>
<td align="left">insumo</td>
</tr>
<tr class="odd">
<td align="left">cleaning</td>
<td align="left">limpieza</td>
</tr>
<tr class="even">
<td align="left">politics</td>
<td align="left">electoral|justicia</td>
</tr>
<tr class="odd">
<td align="left">medical</td>
<td align="left">hospital|medicamento|medico</td>
</tr>
<tr class="even">
<td align="left">chemical</td>
<td align="left">reactivo|laboratorio|quimico|quimica</td>
</tr>
<tr class="odd">
<td align="left">insurance</td>
<td align="left">seguro</td>
</tr>
<tr class="even">
<td align="left">specific_brand</td>
<td align="left">marca</td>
</tr>
<tr class="odd">
<td align="left">electricity</td>
<td align="left">electric</td>
</tr>
<tr class="even">
<td align="left">kitchen</td>
<td align="left">cocina|comedor|gastronomic</td>
</tr>
<tr class="odd">
<td align="left">computer</td>
<td align="left">informatico|computadora</td>
</tr>
<tr class="even">
<td align="left">air_conditioning</td>
<td align="left">aire|acondicionado</td>
</tr>
<tr class="odd">
<td align="left">spare_part</td>
<td align="left">respuesto</td>
</tr>
<tr class="even">
<td align="left">machine</td>
<td align="left">maquinaria</td>
</tr>
<tr class="odd">
<td align="left">fuel</td>
<td align="left">combustible|diesel</td>
</tr>
</tbody>
</table>
<p>More information about the buyer grouping process and the context grouping process can be found in the <a href="buyer.html#buyer">Buyer Grouping</a> section and the <a href="context.html#context">Context Grouping</a> section respectively.</p>
</div>
<div id="fe-script-select" class="section level4" number="2.1.3.6">
<h4><span class="header-section-number">2.1.3.6</span> Selecting Target and Predictors</h4>
<p>Only the desired target variables and predictors variables are selected from the training dataset to reduce memory usage.</p>
</div>
<div id="fe-script-log-transform" class="section level4" number="2.1.3.7">
<h4><span class="header-section-number">2.1.3.7</span> Log-Transforming Skewed Variables</h4>
<p>There are usually two reasons to log-transform variables. The first is when the distribution of the target variable is skewed. It is ideal to have a normally distributed target variable, so a transformation is desired, which is in this case, a log base 10 transformation. For prices, a log transformation is common in analyses. The second reason is that a given predictor appears to be logarithmically related to the target variable, which can be determined from correlation plots. Then, the predictor is transformed.</p>
</div>
<div id="fe-script-remove-outliers" class="section level4" number="2.1.3.8">
<h4><span class="header-section-number">2.1.3.8</span> Removing Outliers</h4>
<p>Really high outliers in terms of unit price are removed, since they may skew the model and make it inaccurate for more reasonable prices. To identify these outliers, an isolation forest was used, since it is one of the most scalable anomaly detection algorithms. The isolation forest assigns an anomaly score to each observation, ranging from 0 to 1 (with 0 being less anomalous and 1 very anomalous). Outliers were defined as having an anomaly score higher than 0.6 (value that can be customized in <code>fe_conf.yaml</code>), so all observations with an anomaly score higher than 0.6 were removed.</p>
<p>More information about the outlier detection and removal process can be found in the <a href="outlier.html#outlier">Outlier Removal</a> section.</p>
</div>
<div id="fe-script-merge-sparse" class="section level4" number="2.1.3.9">
<h4><span class="header-section-number">2.1.3.9</span> Merging Sparse Categories</h4>
<p>To facilitate prediction, uncommon values in categorical variables are grouped together into an <em>Other</em> group. For example, say a given categorical variable has six options: A, B, C, D, E, and F. The categories have 100, 200, 300, 200, 2, and 5 observations respectively. In this case, We would alter the variable to have 5 categories: A, B, C, D, and Other, where Other is comprised of the 2 and 5 observations from E and F. The threshold for determining what proportion of samples is too sparse can be easily changed in the configuration file.</p>
</div>
<div id="fe-script-one-hot-encode" class="section level4" number="2.1.3.10">
<h4><span class="header-section-number">2.1.3.10</span> One-Hot Encoding Categorical Variables</h4>
<p>Many machine learning algorithms do not support categorical/text inputs. So it is necessary to convert all categorical predictors to numerical data. This is accomplished through one-hot encoding, which creates a new variable for each category. For example, say a given categorical variable called “Cat” has three options: A, B, and C. One-hot encoding will create the three columns Cat_A, Cat_B, and Cat_C. Each column has two possible values: 1 if a given observation is in the category, or 0 if it is not. So an observation in category B, will have values 0, 1, 0 for the respective new columns. The model generated in order to create these new variables is stored, and should be used to reconstruct the one-hot encoding for future test datasets to guarantee the column specifications are the same.</p>
</div>
<div id="fe-script-impute-missing" class="section level4" number="2.1.3.11">
<h4><span class="header-section-number">2.1.3.11</span> Imputing/Removing Missing Values</h4>
<p>In any dataset/database, there are going to be missing values for certain variables. As many machine learning algorithms do not allow missing values, these need to be removed or imputed. For the target variable, we do not want to make assumptions about values, so all rows where the target variable has a missing value are removed. For <em>TRUE</em>/<em>FALSE</em> predictor variables, missing values were imputed to be <em>FALSE</em>. For categorical variables, all missing entries in one-hot encoded columns are set to 0, indicating that the value is none of those categories. Currently, we do not have any numeric variables with missing values, so if they should be included in the future, imputation methods need to be implemented.</p>
</div>
<div id="fe-script-eda" class="section level4" number="2.1.3.12">
<h4><span class="header-section-number">2.1.3.12</span> Running Automated Exploratory Data Analysis</h4>
<p>The <code>fe.R</code> script saves the training dataset before one-hot encoding, and inputs it into the automated exploratory data analysis file. A more in-depth look at the output can be found in the <a href="eda.html#eda">Exploratory Data Analysis</a> section.</p>
</div>
</div>
<div id="fe-script-outputs" class="section level3" number="2.1.4">
<h3><span class="header-section-number">2.1.4</span> Outputs</h3>
<p>The following are the outputs produced by running <code>fe.R</code> and the associated scripts and reports. Make sure these folders are already created in the directory before running the scripts.</p>
<ul>
<li><code>reports/</code>
<ul>
<li><code>training_set_eda_DATE.pdf</code> (report generated by the automated EDA)</li>
</ul></li>
<li><code>data/</code>
<ul>
<li><code>output/</code>
<ul>
<li><code>training_set_DATE.rds</code> (training dataset generated from the script)</li>
<li><code>one_hot_encoding_DATE.rds</code> (one-hot encoding model)</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<div id="fe-conf" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> The Configuration File</h2>
<p>The configuration file <code>fe_conf.yaml</code> contains the inputs for the tasks outlined in Feature Engineering. This file needs to be altered for any desired change of input. The following sections describe how to make those alterations. Every value must be stored in quotation marks unless it is a number or boolean (<em>TRUE</em>/<em>FALSE</em>).</p>
<div id="fe-conf-data-load" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Loading in Data</h3>
<p>To load in the correct input data, the individual files must all be in the same directory, with the path location specified under <em>loc:</em>. Importantly, when the individual files are listed under <em>input_data:</em>, they must be in order of joining. The script will merge each input data file with the one listed prior, so there must be an id column relating the two. Below is the list of input data files that we have identified as the most useful; they are in correct merging order.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="fe.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb1-2"><a href="fe.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">loc</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;/files/data/&quot;</span><span class="co"> # loc is input path</span></span>
<span id="cb1-3"><a href="fe.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">dest</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;~/dncp/data/output/&#39;</span><span class="co"> # dest is output path</span></span>
<span id="cb1-4"><a href="fe.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">input_data</span><span class="kw">:</span></span>
<span id="cb1-5"><a href="fe.html#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">        # listed in order of joining</span></span>
<span id="cb1-6"><a href="fe.html#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">item_solicitado</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;item_solicitado.csv&#39;</span></span>
<span id="cb1-7"><a href="fe.html#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">llamado_grupo</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;llamado_grupo.csv&#39;</span></span>
<span id="cb1-8"><a href="fe.html#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">llamado</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;llamado.csv&#39;</span></span>
<span id="cb1-9"><a href="fe.html#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">pac</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;pac.csv&#39;</span></span>
<span id="cb1-10"><a href="fe.html#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">producto_n5</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;producto_n5.csv&#39;</span></span>
<span id="cb1-11"><a href="fe.html#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">producto_n4</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;producto_n4.csv&#39;</span></span>
<span id="cb1-12"><a href="fe.html#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">producto_n3</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;producto_n3.csv&#39;</span></span>
<span id="cb1-13"><a href="fe.html#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">producto_n2</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;producto_n2.csv&#39;</span></span>
<span id="cb1-14"><a href="fe.html#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">producto_n1</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;producto_n1.csv&#39;</span></span>
<span id="cb1-15"><a href="fe.html#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">unidad_contratacion</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;unidad_contratacion.csv&#39;</span></span>
<span id="cb1-16"><a href="fe.html#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">entidad</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;entidad.csv&#39;</span></span>
<span id="cb1-17"><a href="fe.html#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">nivel_entidad</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;nivel_entidad.csv&#39;</span></span></code></pre></div>
<p>The naming of each dataset is important as well. Using <code>pac</code> as an example, the following snippet explains the nomenclature of the configuration file for loading in the data.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="fe.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pac</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;pac.csv&#39;</span></span>
<span id="cb2-2"><a href="fe.html#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="fe.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># pac:      is the name of the data file which will be attached to every</span></span>
<span id="cb2-4"><a href="fe.html#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">#           variable name in the file, as in monto_total_pac</span></span>
<span id="cb2-5"><a href="fe.html#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb2-6"><a href="fe.html#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># &#39;pac.csv&#39; is the filename holding the input data</span></span></code></pre></div>
</div>
<div id="features" class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Features</h3>
<div id="fe-conf-features" class="section level4" number="2.2.2.1">
<h4><span class="header-section-number">2.2.2.1</span> Selecting Features</h4>
<p>Under the <em>feature:</em> section, the desired target variable and predictor variables should be specified as a single string and list of strings respectively. The <code>fe.R</code> script will rename all variables to be of the form variable_dataset, explained in the <a href="fe.html#fe-script-join-data">Joining Data</a>. In the configuration file, this naming conventions should be used at all locations. Additionally, a unique id column should be specified to maintain data provenance. For this training dataset, it is most commonly the id column in item solicitado: <strong>item_solicitado_id</strong>.</p>
</div>
<div id="fe-conf-grouping" class="section level4" number="2.2.2.2">
<h4><span class="header-section-number">2.2.2.2</span> Specifying Groups for New Variable Creation</h4>
<p>Almost all of the grouping section of the configuration file should not be touched. The names have been determined through text analysis (as explained in the <a href="fe.html#fe-script-grouping">Creating Grouping Variables</a> section) and do not require alterations. The parts that can be changed are the <em>use:</em> section under each group. This value indicates whether or not the given group variable should be including in the dataset or not. If set to <em>false</em>, then the given group will not be created and vice versa for if set to <em>true</em>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="fe.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">groups</span><span class="kw">:</span></span>
<span id="cb3-2"><a href="fe.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">buyer</span><span class="kw">:</span></span>
<span id="cb3-3"><a href="fe.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">use</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span><span class="co"> # this line can be changed</span></span></code></pre></div>
</div>
<div id="fe-conf-filter" class="section level4" number="2.2.2.3">
<h4><span class="header-section-number">2.2.2.3</span> Filtering</h4>
<p>To add filter conditions, add logical statements (i.e., ones that can be evaluated to be <em>TRUE</em> or <em>FALSE</em>) in quotations to the <em>filter:</em> section. If no conditions are desired, this section can be left blank. Unlimited conditions can be added in the same format as the examples below.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb4-1"><a href="fe.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span><span class="kw">:</span></span>
<span id="cb4-2"><a href="fe.html#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">    # the level 2 product description is &quot;Fuels&quot;</span></span>
<span id="cb4-3"><a href="fe.html#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">condition_1</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;descripcion_ingles_producto_n2 == &quot;Fuels&quot;&#39;</span></span>
<span id="cb4-4"><a href="fe.html#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb4-5"><a href="fe.html#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">    # the price is above 10,000 PYG</span></span>
<span id="cb4-6"><a href="fe.html#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">condition_2</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;precio_unitario_item_solicitado &gt; 10000&#39;</span></span>
<span id="cb4-7"><a href="fe.html#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb4-8"><a href="fe.html#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co">    # the publication year is after 2015</span></span>
<span id="cb4-9"><a href="fe.html#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">condition_3</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;year(fecha_publicacion_llamado) =&gt; 2015&#39;</span></span>
<span id="cb4-10"><a href="fe.html#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb4-11"><a href="fe.html#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co">    # only goods</span></span>
<span id="cb4-12"><a href="fe.html#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">condition_4</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;service == FALSE&#39;</span></span>
<span id="cb4-13"><a href="fe.html#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span></span>
<span id="cb4-14"><a href="fe.html#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co">    # no open contracts</span></span>
<span id="cb4-15"><a href="fe.html#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">condition_5</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;contrato_abierto_llamado_grupo == FALSE&#39;</span></span></code></pre></div>
</div>
<div id="fe-conf-currency-inflation" class="section level4" number="2.2.2.4">
<h4><span class="header-section-number">2.2.2.4</span> Adjusting for Currency and Inflation</h4>
<p>To account for inflation and exchange currencies, two datasets are required. Cotizacion, which contains the exchange rate for USD to PYG over the years, and a dataset with Consumer Price Index data. The locations of these datasets must be specified in their corresponding locations in the configuration file. Under the <em>inflation:</em> section, the desired base year and base month for prices to be adjusted to can be specified.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="fe.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">currency</span><span class="kw">:</span></span>
<span id="cb5-2"><a href="fe.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">loc</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;/files/data/&#39;</span></span>
<span id="cb5-3"><a href="fe.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">file</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;cotizacion.csv&#39;</span></span>
<span id="cb5-4"><a href="fe.html#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">inflation</span><span class="kw">:</span></span>
<span id="cb5-5"><a href="fe.html#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">loc</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;/files/data/&#39;</span></span>
<span id="cb5-6"><a href="fe.html#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">file</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;ipc.csv&#39;</span></span>
<span id="cb5-7"><a href="fe.html#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">base_year</span><span class="kw">:</span><span class="at"> </span><span class="dv">2021</span></span>
<span id="cb5-8"><a href="fe.html#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">base_month</span><span class="kw">:</span><span class="at"> </span><span class="dv">6</span></span></code></pre></div>
</div>
<div id="fe-conf-log-transform-ohe" class="section level4" number="2.2.2.5">
<h4><span class="header-section-number">2.2.2.5</span> Log-Transforming and One-Hot Encoding</h4>
<p>To have variables be log transformed or one-hot encoded is as simple as writing them in a list under their given categories, making sure to maintain the naming scheme of <strong>variable_dataset</strong>.</p>
</div>
<div id="fe-conf-merge-sparse" class="section level4" number="2.2.2.6">
<h4><span class="header-section-number">2.2.2.6</span> Merging Sparse Categories</h4>
<p>The configuration file contains the structure to specify which variables require condensing as well as the threshold at which condensing in done. A threshold of 0.01 indicates that any category with less than a 1% occurrence rate is reduced into an <em>Other</em> category.</p>
</div>
<div id="fe-conf-remove-outliers" class="section level4" number="2.2.2.7">
<h4><span class="header-section-number">2.2.2.7</span> Removing Outliers</h4>
<p>To remove outliers from the training dataset, simply set <em>outliers:</em> to <em>true</em>. Then the code to perform the isolation forest described in the <a href="fe.html#fe-script-remove-outliers">Feature Engineering Remove Outliers</a> section.</p>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="buyer.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
